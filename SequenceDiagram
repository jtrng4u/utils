Participant User
Participant WebApp
Participant Redis
Participant Database
Participant SessionRepository

User->WebApp: Update Password Request
WebApp->Database: Update Password in DB
Database->WebApp: Password Updated
WebApp->Redis: Get Sessions for User
Redis->WebApp: Return Session IDs
WebApp->SessionRepository: Delete Session by ID
loop for each session ID
  SessionRepository->WebApp: Session Deleted
end
WebApp->Redis: Delete All Sessions for User
WebApp->User: Password Updated and Sessions Invalidated



@startuml
actor User
participant "WebApp" as WebApp
participant "Redis" as Redis
participant "Database" as Database
participant "SessionRepository" as SessionRepository

User -> WebApp: Update Password Request
WebApp -> Database: Update Password in DB
Database -> WebApp: Password Updated
WebApp -> Redis: Get Sessions for User
Redis -> WebApp: Return Session IDs
WebApp -> SessionRepository: Delete Session by ID
loop for each session ID
  SessionRepository -> WebApp: Session Deleted
end
WebApp -> Redis: Delete All Sessions for User
WebApp -> User: Password Updated and Sessions Invalidated
@enduml



@startuml
actor User
participant "WebApp" as WebApp
participant "Redis" as Redis
participant "Database" as Database
participant "SessionRepository" as SessionRepository

== User Logs In ==
User -> WebApp: Login Request
WebApp -> Database: Validate Credentials
Database -> WebApp: Credentials Valid
WebApp -> SessionRepository: Create Session
SessionRepository -> WebApp: Session Created
WebApp -> Redis: Add Session ID to User Sessions
Redis -> WebApp: Session ID Added
WebApp -> User: Login Successful

== User Logs Out ==
User -> WebApp: Logout Request
WebApp -> SessionRepository: Invalidate Session
SessionRepository -> WebApp: Session Invalidated
WebApp -> Redis: Remove Session ID from User Sessions
Redis -> WebApp: Session ID Removed
WebApp -> User: Logout Successful
@enduml
